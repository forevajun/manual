# Bash

### 1. Base
Открыть терминал ``Ctrl+Alt+T``  
Закрыть терминал ``Ctrl+D``  
Закрыть приложение запущенное через терминал ``Ctrl+C``  
Запускать всё через root ``sudo -s``

Открыть скрипт в тектовом редакторе nano / vim:  
``$ nano myscript.sh``  
``$ vi myscript.sh``

Первая строка в bash скрипте:  
``#!/bin/bash``

Сделать файл исполняемым:  
``$ chmod +x ./myscript``  
Выполнить скрипт:  
``$ ./myscript``

### 2. Syntax

#### 2.1 Base

1. ``#`` - оставить комментарий
2. ``echo <string>`` - выводит строку "string" на экран
3. ``clear`` - отчистить терминал
4. ```man <cmd>``` - отображает справку (manual) по команде "cmd"

#### 2.2 Navigating the Filesystem

1. ``ls </path/to/directory>`` - отобразить все файлы и директории  
``ls -a`` отображает скрытые файлы и директории  
``ls -l`` отображает расширенную информацию о файлах и папках

2. ``cd </path/to/directory>`` - позволяет перемещаться по файловой системе.  
Путь может быть как абсолютным (начмнаться с /), так и относительным (подразумевается расположение пути относительно текущего).  
``cd`` - без параметров перемещает в домашнюю директорию пользователя  
``cd -`` - перемещает по прошлому пути  
``cd .`` - текущая директория  
``cd ..`` - родительская директория  
``cd ~`` - домашняя директория пользователя  

3. ``pwd`` - выводит текущий абсолютный путь

4. ``mkdir <directory>`` - создает директории с именем "directory"

5. ``rmdir <directory>`` - удаляет директории с именем "directory"

6. ``touch <file>`` - создать файл "file"

7. ``rm <file>`` - удаляет файл "file"  
``rm -r <directory>`` - удаляет директорию "directory"

8. ``mv <file1> <file2>`` - перемещает файл "file1" по пути "file2"

9. ``cp <file1> <file2>`` - копирует файл "file1" по пути "file2"

10. ``locate <file>`` - найти файл

11. ``file <file_name>`` - выводит на экран тип файла (настоящий тип, а не указанный в расширении)

#### 2.3 Text file

1. ``strings <file>`` - выводит все строки с печатными символами из файла "file" на экран

2. ``cat <file>`` - отображает содержимое файла "file"  
``-N`` ``–LINE-NUMBERS`` - пронумеровать строки

3. ``head <file>`` - отображает первые 10 строк файла "file"  
``head -n 5 <file>`` - отображает первые 5 строк файла "file"  
``head -n -7 <file>`` - пропустит последние 7 строк файла "file"

4. ``tail <file>`` - отображает последние 10 строк файла "file"  
``tail -n 2 <file>`` - отображает последние 2 строки файла "file"  
``tail -n -3 <file>`` - пропустит первые 3 строки файла "file"

5. ``more <file>`` - отображает содержимое файла "file", выводит только содержимое помещающееся в окно терминала.  
"Enter" / "Space" - показать следующие строки  
"b" - показать предыдущие строки  
"q" - закрывает просмотр.  
``more -5 <file>`` - изменить размер страницы (будут показаны первые 5 строк, после нажатия Enter следующий 5)  
``more +10 <file>`` - начать просмотр с 10-й строки  
``more +/<text> <file>`` - найти "text" и начать показ с этого места  
``-f`` - останавливает перенос длинных строк  
``-p`` - очищает экран, а затем отображает текст  
``-s`` - сжимает несколько пустых строк в одну

6. ``less <file>`` - отображает содержимое файла "file", выводит только содержимое помещающееся в окно терминала.    
``-N`` ``–LINE-NUMBERS`` - пронумеровать строки  
"Space , Enter , b и q" - как в ``more`` + навигация стрелками  
В качестве альтернативы стрелкам:  
"j" - для перемещения на одну строку вперед  
"k" - для перемещения на одну строку назад  
``less -5j`` - нажатие "j" перенесет нас на 5 строк вперед  
``less -g`` - ключ перенесет нас в начало файла  
``less -G`` - ключ приведет нас в конец файла  
``less /<text> <file>`` - найти "text" и начать показ с этого места    
"n" - перейти к следующему вхождению шаблона  
"N" - перейти к предыдущему вхождению шаблона    
``less ?<text> <file>`` - поиск "text" в обратном направлении (перед этим перейти в конце файла)  
``less &<text> <file>`` - просматривать только те строки в файле, которые соответствуют шаблону    
"F" - когда содержимое файла изменяется, просмотреть изменения (поведение аналогично команде ``tail -f``)

#### 2.4 Find text

``grep [opts] "pattern" file``  
``grep -w`` - точное совпадение слова ("abc" -> (+)"aa abc bb" // (-)"abcd")    
``grep -i`` - игнорировать регистр символов  
``grep -n`` - печатать номера строк  
``grep -B 4`` - 4 строки ДО (before)  
``grep -A 4`` - 4 строки ПОСЛЕ (after)  
``grep -C 2`` - 2 строки ДО и ПОСЛЕ (center)  
``grep -r`` - рекурсивный поиск (в текущей директории и в subdir)  
``grep -l`` - список файлов, которые содержат строку  
``grep -c`` - список файлов, которые содержат строку и сколько раз они там повторяются  

### 3 Other functions

#### 3.1 Перенаправление вывода
Bash позволяет перенаправлять стандартный вывод в файлы с помощью операторов ``>`` и ``>>``  
``$ echo hello! > 1.txt`` - если файл не существовал, он будет создан, иначе он будет перезаписан  
``$ echo hello! >> 1.txt`` - если файл не существовал, он будет создан, иначе дописывает в конец файла  
``$ echo hello! > /dev/null`` - скрыть все сообщения, не сохраняя их

#### 3.2 Конвейер (pipe)
Если нужно перенаправить вывод одной команды на вход другой используется оператор ``|``.  
``$ tail -n 500 2010.log | grep -w -i "error"``  
``$ ls -l | grep "\.txt$"``

#### 3.3 Регулярные выражения
``egrep [opts] "pattern" file``

---

### Math

``-eq`` - ``=`` is equal to  
``if [ "$a" -eq "$b" ]``

``-ne`` - ``!=`` is not equal to  
``if [ "$a" -ne "$b" ]``

``-gt`` - ``>`` is greater than  
``if [ "$a" -gt "$b" ]``

``-ge`` - ``>=`` is greater than or equal to  
``if [ "$a" -ge "$b" ]``

``-lt`` - ``<`` is less than  
``if [ "$a" -lt "$b" ]``

``-le`` - ``<=`` is less than or equal to  
``if [ "$a" -le "$b" ]``

``<`` - is less than (within double parentheses)  
``(("$a" < "$b"))``

``<=`` - is less than or equal to (within double parentheses)  
``(("$a" <= "$b"))``

``>`` - is greater than (within double parentheses)  
``(("$a" > "$b"))``

``>=`` - is greater than or equal to (within double parentheses)  
``(("$a" >= "$b"))``